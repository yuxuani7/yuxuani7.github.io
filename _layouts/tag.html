<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title | default: page.tag }} | Tags</title>
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
</head>
<body>
  <header>
    <div class="nav">
      <div class="logo">
        <span class="logo-badge">TG</span>
        <span>Tag</span>
      </div>
      <nav>
        <ul>
          <li><a href="{{ '/' | relative_url }}">Home</a></li>
          <li><a href="{{ '/blog/' | relative_url }}">Blog</a></li>
          <li><a href="{{ '/blog/tags.html' | relative_url }}">Tags</a></li>
          <li><a href="{{ '/pages/about.html' | relative_url }}">Online CV</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="page">
    <section class="hero">
      <div>
        <span class="pill">Tag</span>
        <h1>{{ page.tag }}</h1>
        <p class="muted">按时间倒序列出标签下的文章。</p>
      </div>
    </section>

    <section>
      <div class="section-title"><span class="dot"></span><strong>Posts</strong></div>
      {% assign tag_posts = site.tags[page.tag] %}
      {% if tag_posts == nil and page.tag_slug %}
        {% assign tag_posts = site.tags[page.tag_slug] %}
      {% endif %}
      {% if tag_posts %}
        {% assign tag_posts = tag_posts | sort: "date" | reverse %}
      {% endif %}
      {% if tag_posts and tag_posts.size > 0 %}
      <div class="grid">
        {% for post in tag_posts %}
        <article class="card">
          <p class="muted">{{ post.date | date: "%Y-%m-%d" }}</p>
          <h3><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>
          <p class="muted">{{ post.excerpt }}</p>
          {% if post.tags %}
          <div class="tags">
            {% for tag in post.tags %}
              {% assign tag_page = site.pages | where: "layout", "tag" | where: "tag", tag | first %}
              {% if tag_page %}
                <a class="tag" href="{{ tag_page.url | relative_url }}">{{ tag }}</a>
              {% else %}
                <span class="tag">{{ tag }}</span>
              {% endif %}
            {% endfor %}
          </div>
          {% endif %}
        </article>
        {% endfor %}
      </div>
      {% else %}
      <div class="card">
        <p class="muted">该标签下暂无文章。</p>
      </div>
      {% endif %}
    </section>
  </main>
</body>
</html>
